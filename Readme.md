# Automatically Evolving Lookup Tables for Function Approximation

This is the companion repository to the publication of the same name by:
- Oliver Krauss - oliver.krauss@fh-hagenberg.at
- Bill Langdon - w.langdon@cs.ucl.ac.uk

If you are interested in this work feel free to check it out, and drop us a mail if you have any questions.

## Structure

- Code contains the source code to everything
  - cbrt and cbrtNoLog contain the code we used to test from the original publication. In case you want to work with it you are better of getting it directly at the [source](http://www0.cs.ucl.ac.uk/staff/W.Langdon/ftp/gp-code)
  - cppComparison and javaComparison contain code to compare in C++ and Java respectively
  - compare is the test harness used to generate the results. It should do everything on its own, but it does NOT switch the function under test automatically. You have to set these for the comparison languages in the main.java file, and in userProvidedFn/CmakeLists.txt
  - userProvidedFn is the core of this project providing the code for automatically generating a lookup table for any newton raphson
- Statistics contains the logs (generated by the test harness in compare) and subsequent excel files where we did statistical analyses. You need to have the [real statistics pack](http://www.real-statistics.com/free-download/real-statistics-resource-pack/) installed for this to work.
  - The statistics were also cross checked with the AIST Internal (https://aist.fh-hagenberg.at) statistics framework, and the datumbox framework (https://github.com/datumbox/datumbox-framework/), source code not in repository.

## How to test

- Getting started requires pre compilation of most projects:
  - **userProvidedFn** -> the C code of this contribution. Is a Cmake project.
    - cmake --build PATH/cmake-build-release --target all -- -j 4
  - **cppComparison** -> The comparison project for C++. Is also a Cmake project
    - cmake --build PATH/cmake-build-release --target all -- -j 4
  - **javaComparison** is a maven project
    - in path -> mvn clean install
  - **cbrt** and **cbrtNoLog** -> Langdon & Petkes original code. both have a build.bat.
    - compare will auto-build for you. Optional: run build.bat
- Finally compile the **compare** project (Java maven):
  - in folder mvn clean install

- The default tests are set to SURT. If you want to change this:
  - In **userProvidedFn** edit CMakeLists.txt -> Line 17 to:
    - Super Root: set(UF ${SURT})
    - Cube Root: set(UF ${CBRT})
    - Square Root: set(UF ${SQRT})
    - Inflection: set(UF ${INFL})
    - Multi-Inflection: set(UF ${MULINFL})
  - in **compare** change Main.java Line 581 to:
    - Super Root: List<Language> ufReferenceComparison = Arrays.asList(Language.CSurt, Language.CPPSurt, Language.JavaSurt);
    - Cube Root: List<Language> ufReferenceComparison = Arrays.asList(Language.C, Language.CPPCbrt, Language.JavaCbrt);
    - Square Root: List<Language> ufReferenceComparison = Arrays.asList(Language.CSqrt, Language.CPPSqrt, Language.JavaSqrt);
    - Inflection: List<Language> ufReferenceComparison = Arrays.asList(); // no comparison available
    - Multi-Inflection: List<Language> ufReferenceComparison = Arrays.asList(); // no comparison available
    - don't forget to recompile!
- Finally you can just run the main function in the jar:
  - in Folder: java -jar ./target/compare.jar
  - This will auto-generate all CSV files for you. Unfortunately transferring to excel / a statistics framework is not automated.

## How to extend

- in **userProvidedFn** create a new function *YourFN.c* and implement the *userProvidedFunction.h*
- Add a new line in CmakeLists.txt *set(YourFN YourFN.c)*
- Set the compiler to accept the function CmakeLists.txt Line 17 -> *set(UF ${YourFN})*
- Compile and enjoy.
